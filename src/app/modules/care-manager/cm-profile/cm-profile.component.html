<div class="container-fluid">
<div class="row">
<div class="col-sm-12 col-lg-12">
  <div class="iq-card">
      <div class="iq-card-header d-flex justify-content-between">
        <div class="iq-header-title">
            <h4 class="card-title">Profile Details</h4>
        </div>
      </div>
      <div class="iq-card-body">
        <form class="form" [formGroup]="myProfileForm" (ngSubmit)="onSubmit()" novalidate>

          <div class="row" >
            <div class="col-sm-12">
              <div class="col-md-12 p-0">
                <div class="row">
                  <div class="col-md-3 text-center" >
                    <div class="form-group">
                      <div class="add-img-user profile-img-edit">
                        <img class="profile-pic img-fluid" alt="profile-pic"
                        [src]="profileImageUrl" onerror="this.onerror=null; this.src='assets/images/user/default.jpg'" />
                        <div class="p-image">
                          <label for="profileImgFile" class="custom-file-upload btn btn-primary" style="font-size: 12px;" >
                            Upload Profile Photo
                          </label>
                          <input id="profileImgFile" class="file-upload" type="file" accept="image/*" (change)="onFileChange($event,'profileImage')" />
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="col-md-8">
                    <div class="row">
                      <div class="form-group col-md-6">
                        <label class="control-label">First Name <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" formControlName="firstName" 
                        [class.is-invalid]="isSubmitted && myProfileFormData.firstName.errors" />
                        <div class="invalid-feedback">
                        {{ getErrorMessage('firstName') }}
                        </div>
                      </div>
                      <div class="form-group col-md-6">
                        <label class="control-label">Last Name <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" formControlName="lastName" 
                        [class.is-invalid]="isSubmitted && myProfileFormData.lastName.errors" />
                        <div class="invalid-feedback">
                        {{ getErrorMessage('lastName') }}
                        </div>
                      </div>                    
                      <div class="form-group col-md-6">
                        <label class="control-label">Email </label>
                        <input type="email" readonly class="form-control" formControlName="email"
                        [class.is-invalid]="isSubmitted && myProfileFormData.email.errors" />
                        <div class="invalid-feedback" >
                        {{ getErrorMessage('email') }}
                        </div>
                      </div>
                      <div class="form-group col-md-6">
                        <label class="control-label">Contact No <span class="text-danger">*</span></label>
                        <input type="text" [pattern]="mobNumberPattern" class="form-control" formControlName="contactNumber"
                        [class.is-invalid]="isSubmitted && myProfileFormData.contactNumber.errors" />
                        <div class="invalid-feedback" >
                        {{ getErrorMessage('contactNumber') }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                

                <div class="row">
                  <div class="form-group col-md-6">
                    <label class="control-label">Address Line 1 <span class="text-danger">*</span></label>
                    <textarea class="form-control" rows="3" formControlName="street1"
                    [class.is-invalid]="isSubmitted && myProfileFormData.street1.errors"></textarea>
                    <div class="invalid-feedback">
                        {{ getErrorMessage('street1') }}
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label class="control-label">Address Line 2</label>
                    <textarea class="form-control" rows="3" formControlName="street2"
                    [class.is-invalid]="isSubmitted && myProfileFormData.street2.errors"></textarea>
                    <div class="invalid-feedback">
                        {{ getErrorMessage('street2') }}
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label class="control-label">City <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" formControlName="city"
                    [class.is-invalid]="isSubmitted && myProfileFormData.city.errors" />
                    <div class="invalid-feedback" >
                        {{ getErrorMessage('city') }}
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label class="control-label">State <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" formControlName="state"
                    [class.is-invalid]="isSubmitted && myProfileFormData.state.errors" />
                    <div class="invalid-feedback">
                        {{ getErrorMessage('state') }}
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label class="control-label">Postal Code <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" formControlName="postalCode"
                    [class.is-invalid]="isSubmitted && myProfileFormData.postalCode.errors" />
                    <div class="invalid-feedback">
                        {{ getErrorMessage('postalCode') }}
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label class="control-label">Country <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" formControlName="country"
                    [class.is-invalid]="isSubmitted && myProfileFormData.country.errors" />
                    <div class="invalid-feedback">
                        {{ getErrorMessage('country') }}
                    </div>
                  </div>
                
                  <div class="form-group col-md-6">
                    <label class="control-label">Birth Date <span class="text-danger">*</span></label>
                    <input type="date" class="form-control" formControlName="dob"
                    [class.is-invalid]="isSubmitted && myProfileFormData.dob.errors" />
                    <div class="invalid-feedback">
                        {{ getErrorMessage('dob') }}
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label>Gender:</label>
                    <select class="form-control" id="gender" formControlName="gender"
                      [ngClass]="{ 'is-invalid': isSubmitted && myProfileFormData.gender.errors }" >
                      <option value="" disabled>Select Gender</option>
                      <option>Male</option>
                      <option>Female</option>
                      <option>Other</option>
                    </select>
                    <div class="invalid-feedback" >
                      {{ getErrorMessage('gender') }}
                    </div>
                  </div>
                </div>                

                <h4 class="mb-4 mt-4">Work Experience and Specialization:</h4>
                <div class="row">

                  
                  <div class="form-group col-md-6">
                    <label class="control-label">Service Category <span class="text-danger">*</span></label>
                    <select class="form-control" id="category" 
                      formControlName="category" 
                      (change)="getSubCategory(myProfileFormData.category.value)"
                      [ngClass]="{ 'is-invalid': isSubmitted && myProfileFormData.category.errors }"
                      >
                      <option value="" disabled>Select Category</option>
                      <option *ngFor="let category of categories" [value]="category.name">{{category.name}}</option>
                    </select>
                    <div class="invalid-feedback">
                        {{ getErrorMessage('category') }}
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label class="control-label">Sub-Category <span class="text-danger">*</span></label>
                    <select class="form-control" id="subcategory" 
                        formControlName="subcategory"
                        [ngClass]="{ 'is-invalid': isSubmitted && myProfileFormData.subcategory.errors }">
                        <option value="">Select Sub-Category</option>
                        <option *ngFor="let subCategory of subCategories" [value]="subCategory.name">{{subCategory.name}}</option>
                    </select>
                    <div class="invalid-feedback" *ngIf="myProfileFormData.subcategory.errors">
                        {{ getErrorMessage('subcategory') }}
                    </div>
                  </div>
                
                  <div class="form-group col-md-6">
                    <label class="control-label">Work Experience </label>
                    <select class="form-control" id="workexperience" formControlName="workexperience"
                      [ngClass]="{ 'is-invalid': isSubmitted && myProfileFormData.workexperience.errors }" >
                          <option value="">Select Experience</option>
                          <option value="5">5 years</option>
                          <option value="10">10 years</option>
                          <option value="15">15 years</option>
                          <option value="20">20 years</option>
                          <option value="25">25 years</option>
                      </select>
                      <div class="invalid-feedback" *ngIf="myProfileFormData.workexperience.errors">
                          {{ getErrorMessage('workexperience') }}
                      </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label class="control-label">Skillsets </label>
                    <input type="text" class="form-control" id="skillset" placeholder="Skillsets" 
                    formControlName="skillset"
                    [ngClass]="{ 'is-invalid': isSubmitted && myProfileFormData.skillset.errors }" />
                    <div class="invalid-feedback" *ngIf="myProfileFormData.skillset.errors">
                        {{ getErrorMessage('skillset') }}
                    </div>
                  </div>



                  <div class="form-group col-md-6">
                    <label >Upload Documents/Certificates</label>
                    <div class="input-group">
                      <input type="file" id="certificateInput" (change)="onFileChange($event, 'certificateFile')" >
                      <div class="input-group-append" *ngIf="file_certificate">
                        <button type="button" class="btn btn-primary" (click)="uploadFile('certificateFile')">Upload</button>
                      </div>
                    </div>
                    <p class="mt-3" *ngFor="let filename of certificateFiles">
                      <a (click)="getSignedUrl('uploadDocuments', getOnlyFileName(filename))"  href="javascript:void(0);" class="mr-3" ><i class="ri-download-line"></i> {{getOnlyFileName(filename)}}</a>
                      <button type="button" class="btn btn-sm btn-primary custom-btn-icon mr-3" ><i class="ri-delete-bin-2-fill pr-0"></i></button>
                    </p>
                  </div>


                </div>
                <button class="btn btn-light float-right" routerLink="/caremanager/home">Cancel</button>
                <button type="submit" class="btn btn-primary mr-2 float-right" >Save</button>
              </div>
            </div>
          </div>
        </form>
    </div>
  </div>
</div>
</div>
</div>